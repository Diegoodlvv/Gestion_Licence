{% extends 'base.html.twig' %}

{% block title %}Blocs d'enseignement
{% endblock %}

{% block breadcrumb %}
	<twig:BreadcrumbItem label="Blocs d'enseignement"/>
{% endblock %}

{% block body %}
	<div class="flex-1 p-8 bg-white">

		<div class="flex justify-between items-center mb-8">
			<h1 class="text-3xl font-medium text-[#2C416E]">Blocs d'enseignement</h1>
		</div>

		<p class="text-gray-600 mb-8">Ces blocs sont les piliers du programme. Étant donné qu'ils sont similaires chaque année, ils ne sont pas modifiables (on peut simplement faire varier le nombre d'heure et leur description).</p>


		<div class="mb-8">
			<h2 class="text-amber-500 font-semibold mb-4">Filtres</h2>
			{{ form_start(form, {'attr': {'class': 'flex flex-wrap gap-4'}}) }}
			<div class="flex-1 min-w-48">
				{{ form_row(form.code)}}
			</div>
			<div class="flex-1 min-w-48">
				{{ form_row(form.name)}}
			</div>
			<div class="min-w-48">
				<div class="block text-sm font-medium text-transparent mb-2">&nbsp;</div>
				<twig:Button type="submit" variant="yellow" label="Filtrer" class="w-full"/>
			</div>

			{{ form_end(form, {'render_rest': false}) }}
		</div>


		<hr class="border-gray-200 mb-6">

		<div>
			<h2 class="text-lg font-semibold text-gray-800 mb-4">{{ teachingBlock|length }}
				bloc{{ teachingBlock|length > 1 ? 's' : '' }}</h2>

			<div class="bg-white rounded-lg shadow-sm overflow-hidden">
				<table class="w-full">
					<thead>
						<tr class="bg-[#F1F2F799] border-b border-gray-200">
							<th class="text-left py-4 px-6 text-sm font-semibold text-gray-600">Code</th>
							<th class="text-left py-4 px-6 text-sm font-semibold text-gray-600">Nom</th>
							<th class="text-left py-4 px-6 text-sm font-semibold text-gray-600">Description</th>
							<th class="text-left py-4 px-6 text-sm font-semibold text-gray-600">Nombre d'heures</th>
							<th class="text-left py-4 px-6 text-sm font-semibold text-gray-600"></th>
						</tr>
					</thead>
					<tbody>
						{% for block in teachingBlock %}
							<tr class="border-b border-gray-100 hover:bg-gray-50 transition-colors">
								<td class="py-4 px-6 text-gray-800">{{ block.code }}</td>
								<td class="py-4 px-6 text-gray-800">{{ block.name|split(' ')|first}}</td>
								<td class="py-4 px-6 text-gray-600 text-sm">{{ block.description ?: '-' }}</td>
								<td class="py-4 px-6 text-gray-800">{{ block.hoursCount ? block.hoursCount ~ 'h' : '-' }}</td>
								<td class="py-4 px-6">
									<a href="{{ path('app_teaching_block_edit', {'id': block.id}) }}" class="inline-flex items-center gap-2 text-gray-500 hover:text-amber-500 transition-colors text-sm">
										<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
											<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
											<circle cx="12" cy="12" r="3"></circle>
										</svg>
										Accéder à la fiche
									</a>
								</td>
							</tr>
						{% else %}
							<tr>
								<td colspan="5" class="py-8 px-6 text-center text-gray-500">Aucun bloc d'enseignement trouvé</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>

			<div class="pagination">
				{{ knp_pagination_render(teachingBlock, 'pagination/knp_pagination.html.twig') }}
			</div>
		</div>
	</div>
{% endblock %}
