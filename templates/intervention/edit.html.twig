{% extends 'base.html.twig' %}

{% block title %}Gestion des interventions
{% endblock %}

{% block breadcrumb %}
	<twig:BreadcrumbItem label="Interventions" href="{{ path('app_intervention') }}"/>
	<twig:BreadcrumbItem label="Modifier l'intervention"/>
{% endblock %}

{% block body %}
	<main class="flex-1 bg-white p-12" id="intervention-form">

		<h1 class="text-[#1F384C]-lg font-semibold text-3xl mb-6">Modifier l'intervention</h1>

		<div class="max-w-2xl">
			{{ form_start(form) }}

			<div class="mb-4">
				{{ form_row(form.title) }}
			</div>

			<div class="flex gap-4 mb-4">
				<div class="w-1/2">
					{{ form_row(form.start_date) }}
				</div>
				<div class="w-1/2">
					{{ form_row(form.end_date) }}
				</div>
			</div>
			<div class="flex gap-4 mb-4">
				<div class="w-1/2">
					{{ form_row(form.intervention_type) }}
				</div>
				<div class="w-1/2">
					{{ form_row(form.module) }}
				</div>
			</div>
			<div class="mb-4">
				{{ form_row(form.instructors) }}
			</div>

			<div class="flex items-center">
				<div class="flex items-center gap-3">
					<label class="relative inline-flex items-center cursor-pointer">
						{{ form_widget(form.remotely, {
                                attr: { class: 'sr-only peer' }
                            }) }}

						<div class=" w-10 h-5 bg-gray-300 rounded-full peer peer-checked:bg-blue-900 transition-colors   after:content-[''] after:absolute after:top-0.5 after:left-0.5  after:w-4
									after:h-4 after:bg-white after:rounded-full after:transition-transform peer-checked:after:translate-x-5">
						</div>
					</label>

					<span class="text-sm text-gray-800">
						Intervention effectuée en visio
					</span>
				</div>

				{{ form_errors(form.remotely) }}
			</div>

			<div class="mt-8 flex gap-4">
				<a href="{{ path('app_intervention') }}">
					<twig:Button label="Retour" variant="grey" type="button"/>
				</a>
				<div data-controller="modal" class="hidden"></div>
				<button type="button" id="deleteButton" class="bg-red-600 text-white hover:bg-red-700 focus:ring-red-600 inline-flex items-center justify-center rounded-lg px-12 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-2 focus:ring-offset-2">
					Supprimer
				</button>
				<twig:Button label="Sauvegarder" type="submit"/>
			</div>

			{{ form_end(form) }}
		</div>
	</main>

	<div id="deletePopUp" class="fixed inset-0 bg-red bg-opacity-50 items-center justify-center z-50 hidden">
		<div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4">

			<div class="flex items-start justify-between p-6 border-b border-gray-200">
				<div class="flex items-start gap-4">
					<div class="shrink-0 w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center">
						<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
						</svg>
					</div>
					<div>
						<h3 class="text-lg font-semibold text-slate-900">Supprimer l'intervention</h3>
						<p class="text-sm text-slate-500 mt-1">Confirmation de l'action</p>
					</div>
				</div>
				<button type="button" id="closePopUp" class="text-gray-400 hover:text-gray-600 transition">
					<svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
					</svg>
				</button>
			</div>

			<div class="p-6">
				<p class="text-slate-700 leading-relaxed">
					Vous vous apprêtez à supprimer l'intervention, cette action est irrévocable.
				</p>
				<p class="text-slate-700 font-medium mt-4">
					Confirmez-vous l'action ?
				</p>
			</div>

			<div class="flex gap-3 p-6 border-t border-gray-200">
				<twig:Button label="Annuler" variant="grey"/>
				<twig:Button label="Confirmer" variant="red" type="submit" href="{{ path('app_intervention_delete', {'id': intervention.id}) }}"/>
			</div>
		</div>
	</div>
{% endblock %}
