{% extends 'base.html.twig' %}

{% block title %}Modifier un enseignant
{% endblock %}

{% block breadcrumb %}
	<twig:BreadcrumbItem label="Corps enseignant" href="{{ path('app_instructor') }}"/>
	<twig:BreadcrumbItem label="{{ instructor.user.firstname }} {{ instructor.user.lastname }}"/>
{% endblock %}

{% block body %}
	<main class="flex-1 bg-white p-12 font-sans">
		<div class="mb-8">
			<h1 class="text-3xl font-medium text-[#2C416E] mb-2">{{ instructor.user.firstname }}
				{{ instructor.user.lastname }}</h1>

			<h2 class="text-lg font-semibold text-amber-400 mb-4">Modules enseignés</h2>

			<div class="space-y-2 mb-4 text-slate-900 font-medium">
				{% for module in instructor.module %}
					{% set used = usedHours[module.id] ?? 0 %}
					{% set remaining = module.hoursCount - used %}
					<li class="list-none">{{ module.name }}
						:
						{{ module.hoursCount }}h00 (dont
						{{ remaining }}h restantes pour cette année)</li>
				{% endfor %}
			</div>

			<twig:Button label="Exporter le récapitulatif (fichier .xls)" type="button" variant="blue" href="{{ path('app_instructor_export', {'id': instructor.id}) }}"/>
		</div>

		<div class="border-t-2 border-amber-200 mb-8 w-full"></div>

		<div class="flex gap-2 mb-8">
			<twig:Button label="Informations générales" type=" button" variant="blue"/>
			<twig:Button label="Interventions" type="button" variant="white" href="{{ path('app_instructor_interventions', {'id': instructor.id}) }}"/>
		</div>

		<div class="mb-6">
			<h3 class="text-xl font-semibold text-amber-400 mb-6">Informations générales</h3>

			{{ form_start(form) }}

			<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
				<div>
					{{ form_label(form.lastname, 'Nom de famille - champ obligatoire', {'label_attr': {'class': 'block text-sm font-medium text-slate-700 mb-1'}}) }}
					{{ form_widget(form.lastname, {'attr': {'class': 'w-full px-4 py-3 border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500'}}) }}
					{{ form_errors(form.lastname) }}
				</div>

				<div>
					{{ form_label(form.firstname, 'Prénom - champ obligatoire', {'label_attr': {'class': 'block text-sm font-medium text-slate-700 mb-1'}}) }}
					{{ form_widget(form.firstname, {'attr': {'class': 'w-full px-4 py-3 border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500'}}) }}
					{{ form_errors(form.firstname) }}
				</div>

				<div>
					{{ form_label(form.email, 'Email - champ obligatoire', {'label_attr': {'class': 'block text-sm font-medium text-slate-700 mb-1'}}) }}
					{{ form_widget(form.email, {'attr': {'class': 'w-full px-4 py-3 border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500'}}) }}
					{{ form_errors(form.email) }}
				</div>
			</div>

			<div class="mb-8">
				{{ form_label(form.module, 'Modules enseignés - champ obligatoire', {'label_attr': {'class': 'block text-sm font-medium text-slate-700 mb-1'}}) }}
				{{ form_widget(form.module, {'attr': {'class': 'w-full px-4 py-2 border border-slate-200 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-500', 'data-controller': 'tom-select'}}) }}
				{{ form_errors(form.module) }}
			</div>

			<div class="mt-8 flex gap-4">
				<twig:Button label="Sauvegarder" type="submit"/>
			</div>

			{{ form_end(form) }}
		</div>

	</main>
{% endblock %}
